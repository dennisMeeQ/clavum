/**
 * Emoji fingerprint mapping for pairing verification.
 *
 * Maps 4 bytes â†’ 4 emoji for visual verification.
 * Each byte indexes into a 256-emoji lookup table.
 */

/**
 * Curated set of 256 visually distinct, cross-platform emoji.
 * Selected for: consistent rendering, easy identification, no skin-tone variants.
 */
const EMOJI_TABLE: readonly string[] = [
  // Animals (32)
  'ğŸ¶',
  'ğŸ±',
  'ğŸ­',
  'ğŸ¹',
  'ğŸ°',
  'ğŸ¦Š',
  'ğŸ»',
  'ğŸ¼',
  'ğŸ¨',
  'ğŸ¯',
  'ğŸ¦',
  'ğŸ®',
  'ğŸ·',
  'ğŸ¸',
  'ğŸµ',
  'ğŸ”',
  'ğŸ§',
  'ğŸ¦',
  'ğŸ¤',
  'ğŸ¦†',
  'ğŸ¦…',
  'ğŸ¦‰',
  'ğŸ¦‡',
  'ğŸº',
  'ğŸ—',
  'ğŸ´',
  'ğŸ¦„',
  'ğŸ',
  'ğŸ›',
  'ğŸ¦‹',
  'ğŸŒ',
  'ğŸ',
  // Nature (32)
  'ğŸŒµ',
  'ğŸ„',
  'ğŸŒ²',
  'ğŸŒ³',
  'ğŸŒ´',
  'ğŸŒ¿',
  'ğŸ€',
  'ğŸ',
  'ğŸ‚',
  'ğŸƒ',
  'ğŸŒº',
  'ğŸŒ»',
  'ğŸŒ¹',
  'ğŸŒ·',
  'ğŸŒ¸',
  'ğŸ’',
  'ğŸ„',
  'ğŸŒ°',
  'ğŸƒ',
  'ğŸŒ¾',
  'ğŸŒŠ',
  'ğŸŒˆ',
  'â­',
  'ğŸŒ™',
  'â˜€ï¸',
  'â›…',
  'â„ï¸',
  'ğŸ”¥',
  'ğŸ’§',
  'ğŸŒ',
  'ğŸŒ',
  'ğŸŒ',
  // Food (32)
  'ğŸ',
  'ğŸŠ',
  'ğŸ‹',
  'ğŸŒ',
  'ğŸ‰',
  'ğŸ‡',
  'ğŸ“',
  'ğŸˆ',
  'ğŸ’',
  'ğŸ‘',
  'ğŸ¥',
  'ğŸ',
  'ğŸ¥¥',
  'ğŸ¥‘',
  'ğŸ†',
  'ğŸ¥”',
  'ğŸ¥•',
  'ğŸŒ½',
  'ğŸŒ¶ï¸',
  'ğŸ¥’',
  'ğŸ¥¬',
  'ğŸ¥¦',
  'ğŸ§„',
  'ğŸ§…',
  'ğŸ',
  'ğŸ¥',
  'ğŸ¥¨',
  'ğŸ§€',
  'ğŸ¥š',
  'ğŸ³',
  'ğŸ¥',
  'ğŸ§‡',
  // Objects (32)
  'âš½',
  'ğŸ€',
  'ğŸˆ',
  'âš¾',
  'ğŸ¾',
  'ğŸ',
  'ğŸ±',
  'ğŸ“',
  'ğŸ¯',
  'ğŸ¹',
  'ğŸ£',
  'ğŸ¥Š',
  'ğŸ¿',
  'ğŸ›·',
  'ğŸ¥Œ',
  'â›¸ï¸',
  'ğŸª',
  'ğŸ­',
  'ğŸ¨',
  'ğŸ¬',
  'ğŸ¤',
  'ğŸ§',
  'ğŸ¹',
  'ğŸ¥',
  'ğŸ·',
  'ğŸº',
  'ğŸ¸',
  'ğŸª•',
  'ğŸ»',
  'ğŸ²',
  'ğŸ®',
  'ğŸ•¹ï¸',
  // Transport (32)
  'ğŸš—',
  'ğŸš•',
  'ğŸšŒ',
  'ğŸš',
  'ğŸï¸',
  'ğŸš“',
  'ğŸš‘',
  'ğŸš’',
  'ğŸš',
  'ğŸšš',
  'ğŸš›',
  'ğŸšœ',
  'ğŸï¸',
  'ğŸš²',
  'ğŸ›´',
  'ğŸš‚',
  'ğŸšƒ',
  'ğŸš„',
  'ğŸš…',
  'ğŸš†',
  'ğŸš‡',
  'ğŸšˆ',
  'âœˆï¸',
  'ğŸš€',
  'ğŸ›¸',
  'ğŸš',
  'â›µ',
  'ğŸš¢',
  'âš“',
  'ğŸ›Ÿ',
  'ğŸ—¼',
  'ğŸ°',
  // Symbols (32)
  'â¤ï¸',
  'ğŸ§¡',
  'ğŸ’›',
  'ğŸ’š',
  'ğŸ’™',
  'ğŸ’œ',
  'ğŸ–¤',
  'ğŸ¤',
  'ğŸ’”',
  'ğŸ’•',
  'ğŸ’',
  'ğŸ’“',
  'ğŸ’—',
  'ğŸ’–',
  'ğŸ’˜',
  'ğŸ’',
  'âœ¨',
  'ğŸ’«',
  'ğŸŒŸ',
  'ğŸ’¥',
  'ğŸ’¢',
  'ğŸ’¤',
  'ğŸ’¨',
  'ğŸ•³ï¸',
  'ğŸ’£',
  'ğŸ””',
  'ğŸ”‘',
  'ğŸ—ï¸',
  'ğŸ’',
  'ğŸ”®',
  'ğŸ§²',
  'ğŸª„',
  // Misc (32)
  'ğŸˆ',
  'ğŸ‰',
  'ğŸŠ',
  'ğŸ',
  'ğŸ€',
  'ğŸ†',
  'ğŸ¥‡',
  'ğŸ¥ˆ',
  'ğŸ¥‰',
  'ğŸ…',
  'ğŸ–ï¸',
  'ğŸ—ï¸',
  'ğŸŸï¸',
  'ğŸ«',
  'ğŸ”–',
  'ğŸ“Œ',
  'ğŸ“',
  'ğŸ—ºï¸',
  'ğŸ§­',
  'â°',
  'âŒ›',
  'ğŸ”’',
  'ğŸ”“',
  'ğŸ›¡ï¸',
  'âš”ï¸',
  'ğŸ”§',
  'ğŸ”¨',
  'â›ï¸',
  'ğŸªš',
  'ğŸ”©',
  'âš™ï¸',
  'ğŸ§©',
  // Extra (32)
  'ğŸª',
  'ğŸŒ‹',
  'ğŸ”ï¸',
  'â›°ï¸',
  'ğŸ—»',
  'ğŸ•ï¸',
  'ğŸ–ï¸',
  'ğŸœï¸',
  'ğŸï¸',
  'ğŸï¸',
  'ğŸŒ…',
  'ğŸŒ„',
  'ğŸŒ ',
  'ğŸ‡',
  'ğŸ†',
  'ğŸŒ‡',
  'ğŸŒ†',
  'ğŸ™ï¸',
  'ğŸŒƒ',
  'ğŸŒ‰',
  'ğŸŒ',
  'ğŸ›¤ï¸',
  'ğŸš',
  'ğŸ—½',
  'â›²',
  'ğŸ ',
  'ğŸ¡',
  'ğŸ¢',
  'ğŸš£',
  'ğŸŠ',
  'ğŸ§—',
  'ğŸª‚',
] as const;

/**
 * Map fingerprint bytes to emoji string.
 * Each byte selects one emoji from the 256-entry table.
 *
 * @param bytes - Fingerprint bytes (typically 4 from kdf.deriveFingerprint)
 * @returns Emoji string (one emoji per byte)
 */
export function fingerprintToEmoji(bytes: Uint8Array): string {
  let result = '';
  for (const byte of bytes) {
    result += EMOJI_TABLE[byte];
  }
  return result;
}

/** Exported for testing */
export const EMOJI_TABLE_SIZE = EMOJI_TABLE.length;
export { EMOJI_TABLE };
